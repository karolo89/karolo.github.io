{
  "hash": "091b7580d398c7486771106265e9c281",
  "result": {
    "markdown": "---\ntitle: \"Voters Registrations\"\nauthor: \"Karol Orozco\"\ndate: \"2023/02/05\"\nimage: \"voter.jpg\"\n---\n\n\n\n\n\nLet’s practice our visualization skills with ggplot2 and recreate the graph from the [“Voter Registrations Are Way, Way Down During The Pandemic”] (https://fivethirtyeight.com/features/voter-registrations-are-way-way-down-during-the-pandemic/) article.\n\nFirst, Let’s get and prepare the data\n\n# Get the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Import data\nx <- getURL(\"https://raw.githubusercontent.com/fivethirtyeight/data/master/voter-registration/new-voter-registrations.csv\")\n\nvreg<- read.csv(text = x)\n\n# Level the Month variable so that its in the right order (ie not alphabetical)\nvreg$Month<-factor(vreg$Month,\nlevels=c(\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\"))\n\n### USE spread() FROM tidyr\nvreg<-vreg%>%\nspread(Year, New.registered.voters)\n\n### RENAME THE COLUMNS\ncolnames(vreg)<-c(\"Jurisdiction\", \"Month\", \"Y2016\", \"Y2020\")\n\n### mutate() FROM dplyr()\nvreg<-vreg%>%\nmutate(change= Y2020-Y2016)%>%\n  mutate(Color = ifelse(change > 0,\"#48E5E8\", \"#F56C6A\"))\n\n  \n\na<- function(change){number_format(accuracy = 1,\n                                  scale = 1/1000,\n                                  suffix = \"K\")(change)}\n\nstr(vreg)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t53 obs. of  6 variables:\n $ Jurisdiction: chr  \"Arizona\" \"Arizona\" \"Arizona\" \"Arizona\" ...\n $ Month       : Factor w/ 5 levels \"Jan\",\"Feb\",\"Mar\",..: 1 2 3 4 1 2 3 4 1 2 ...\n $ Y2016       : int  25852 51155 48614 30668 87574 103377 174278 185478 17024 20707 ...\n $ Y2020       : int  33229 50853 31872 10249 151595 238281 176810 38970 20260 33374 ...\n $ change      : int  7377 -302 -16742 -20419 64021 134904 2532 -146508 3236 12667 ...\n $ Color       : chr  \"#48E5E8\" \"#F56C6A\" \"#F56C6A\" \"#F56C6A\" ...\n```\n:::\n:::\n\n\n\n## The Graph\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(vreg, aes(x= Month, y= change, fill = Color))+\n  \n    geom_col()+ \n \n  geom_hline( yintercept = 0, color= \"black\")+\n\n  geom_rect(data = data.frame(Jurisdiction = \"Arizona\"), \n              aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n              color = \"darkgrey\", \n              fill = \"white\", \n              alpha = 0, \n              linetype = \"dotted\", \n              inherit.aes = FALSE)+\n  geom_rect(data = data.frame(Jurisdiction = \"California\"), \n            aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n            color = \"darkgrey\", \n            fill = \"white\", \n            alpha = 0, \n            linetype = \"dotted\", \n            inherit.aes = FALSE)+\n   geom_rect(data = data.frame(Jurisdiction = \"Colorado\"), \n             aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n             color = \"darkgrey\", \n             fill = \"white\", \n             alpha = 0, \n             linetype = \"dotted\", \n             inherit.aes = FALSE)+\n  geom_rect(data = data.frame(Jurisdiction = \"Delaware\"), \n            aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n            color = \"darkgrey\", fill = \"white\", \n            alpha = 0, \n            linetype = \"dotted\", \n            inherit.aes = FALSE)+\n  geom_rect(data = data.frame(Jurisdiction = \"Florida\"), \n            aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n            color = \"darkgrey\", \n            fill = \"white\", \n            alpha = 0, \n            linetype = \"dotted\", inherit.aes = FALSE)+\n  geom_rect(data = data.frame(Jurisdiction = \"Georgia\"), \n            aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n            color = \"darkgrey\", \n            fill = \"white\", \n            alpha = 0, \n            linetype = \"dotted\", \n            inherit.aes = FALSE)+\n  geom_rect(data = data.frame(Jurisdiction = \"Illinois\"), \n            aes(xmin = 4.5, xmax= 5.5, ymin= -Inf, ymax = Inf), \n            color = \"darkgrey\", \n            fill = \"white\", \n            alpha = 0, \n            linetype = \"dotted\", \n            inherit.aes = FALSE)+\n  \n    facet_wrap(~Jurisdiction, scales = \"free_y\")+\n\n  scale_fill_identity(guide= FALSE)+\n  scale_x_discrete(limits=c(\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\"), \n                   breaks=c(\"Jan\",\"May\"))+\n  scale_y_continuous(labels = label_number_si(a =! 0), n.breaks = 4)+\n\n  labs(\n        x=\"\",\n        y=\"\",\n      title = \"Voter registration dropped dramatically during the pandemic\",\n      subtitle = \"Difference in the number of newly registered voters for each month in 2020 compared to the same month in 2016\",\n      caption = \"Some states treat voters who move between counties within a state as new registrants because they're unregistered from their old county and nearly registered in the new ones.          \",\n      \n      tag= \"FiveThirtyEight\") +\n\n    theme_classic()+\n    theme(\n          axis.line.y=element_blank(),\n          axis.line.x = element_blank(),\n          axis.ticks = element_blank(),\n          axis.text.y = element_text(size = 6.5, color = \"gray\"), \n          axis.text.x = element_text(size= 6.5, color = \"gray\"),\n          \n          \n          plot.title = element_text(size =9, face = \"bold\", hjust = 0.55),\n          plot.title.position = \"plot\",\n          plot.subtitle= element_text(size = 8, hjust = 0.55),\n          \n          plot.caption = element_text(hjust = 0, size = 6, color = \"grey50\",\n                                      margin = margin(r=5)),\n          plot.background = element_rect(fill= \"white\"),\n          plot.tag.position = \"bottom\",\n          plot.tag = element_text(size= 5, color = \"gray\", hjust =0.1, \n                                  margin=margin(t=1, \n                                                r=5, \n                                                b=1, \n                                                l=20, \n                                                unit=\"pt\")),\n          panel.grid.minor.y = element_blank(),\n          panel.grid.major.y = element_line(size= 0.1, color= \"lightgrey\",\n                                            linetype= \"solid\"),\n          panel.background = element_rect(fill = \"white\"),\n          panel.border = element_blank(),\n          panel.spacing = unit(1, \"lines\"),\n          \n          strip.background= element_rect(fill= \"white\", linetype = \"blank\"),\n          strip.text = element_text(color= \"black\", face= \"bold\"),\n          strip.text.x = element_text(face = \"bold\", size= 7),\n\n          \n          legend.title = element_blank(),\n          legend.position = \"none\"\n    \n)\n```\n\n::: {.cell-output-display}\n![](voter_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "voter_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}